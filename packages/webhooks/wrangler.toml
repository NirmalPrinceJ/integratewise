# IntegrateWise Webhook Ingress Worker
name = "integratewise-webhooks"
main = "src/worker.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# ============================================================================
# Production Environment
# ============================================================================
[env.production]
name = "integratewise-webhooks"
routes = [
  { pattern = "webhooks.integratewise.online/*", zone_name = "integratewise.online" }
]

[env.production.vars]
ENVIRONMENT = "production"

# ============================================================================
# Provider Enable Switches (set to "true" to activate)
# ============================================================================
# Available providers (accounts exist)
ENABLE_HUBSPOT = "true"
ENABLE_LINKEDIN = "true"
ENABLE_CANVA = "true"
ENABLE_GITHUB = "true"
ENABLE_VERCEL = "true"
ENABLE_TODOIST = "true"
ENABLE_NOTION = "true"
ENABLE_AI_RELAY = "true"

# Not available yet (set to "true" when accounts are created)
ENABLE_SALESFORCE = "false"
ENABLE_PIPEDRIVE = "false"
ENABLE_GOOGLE_ADS = "false"
ENABLE_META = "false"
ENABLE_WHATSAPP = "false"
ENABLE_RAZORPAY = "false"
ENABLE_STRIPE = "false"

# ============================================================================
# Secrets (set via wrangler secret put --env production)
# ============================================================================
# Database
# wrangler secret put NEON_CONNECTION_STRING --env production

# Available provider secrets
# wrangler secret put HUBSPOT_CLIENT_SECRET --env production
# wrangler secret put LINKEDIN_CLIENT_SECRET --env production
# wrangler secret put CANVA_WEBHOOK_SECRET --env production
# wrangler secret put GITHUB_WEBHOOK_SECRET --env production
# wrangler secret put VERCEL_WEBHOOK_SECRET --env production
# wrangler secret put AI_RELAY_SECRET --env production

# Future provider secrets (add when accounts created)
# wrangler secret put RAZORPAY_WEBHOOK_SECRET --env production
# wrangler secret put STRIPE_ENDPOINT_SECRET --env production
# wrangler secret put SALESFORCE_SECURITY_TOKEN --env production
# wrangler secret put PIPEDRIVE_WEBHOOK_TOKEN --env production
# wrangler secret put META_VERIFY_TOKEN --env production
# wrangler secret put WHATSAPP_VERIFY_TOKEN --env production

# ============================================================================
# Observability
# ============================================================================
[observability]
enabled = true

[observability.logs]
enabled = true
head_sampling_rate = 1

# Note: CPU limits require paid plan
